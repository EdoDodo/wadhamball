@(registrationForm: Form[DepositForm], clientToken: String, didFail: Boolean)(implicit flash: play.api.mvc.Flash, messages: Messages)

@import helper._

@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) } 

@template {

    <div class="container">

                <h1>Presale Tickets for Wadham Students</h1>

                @if(didFail) {
                    <div class="alert-message warning">
                        <strong>There was an error processing your transaction!</strong>
                    </div>
                }

                <p>If you're a Wadham student you can reserve your spot at Wadham Ball 2016 by paying 65 pounds below.<br/>
                Please note that you can only reserve one ticket for yourself here, guests will have to buy tickets in the main ticket sale at the start of Hilary.<br />
                You'll need to pay the remaining 65 pounds (plus transaction fee up to a maximum of 3 pounds) a week before the main ticket sale.</p>

                @form(routes.Deposit.doDeposit()) {

                    <fieldset>
                        @inputText(registrationForm("firstName"), '_label -> "First Name", '_showConstraints -> false)
                        @inputText(registrationForm("lastName"), '_label -> "Last Name", '_showConstraints -> false)
                        @inputText(registrationForm("email"), '_label -> "Wadham Email", '_showConstraints -> false)
                        <div id="payment-form"></div>
                    </fieldset>

                    <div class="actions input-group">
                        <input type="submit" value="Pay Deposit (65GBP)" class="btn primary" style="margin-right: 150px">
                    </div>

                    <script src="https://js.braintreegateway.com/v2/braintree.js"></script>
                    <script>
                    braintree.setup("@clientToken", "dropin", {
                      container: "payment-form"
                    });
                    </script>
                }
    </div>
    
}
